<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ModBus::Slave
  
    &mdash; Pizza SMD Oven Controller
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ModBus.html" title="ModBus (module)">ModBus</a></span></span>
     &raquo; 
    <span class="title">Slave</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ModBus::Slave
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">ModBus::Slave</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Debug.html" title="ModBus::Debug (module)">Debug</a></span>, <span class='object_link'><a href="Errors.html" title="ModBus::Errors (module)">Errors</a></span>, <span class='object_link'><a href="Options.html" title="ModBus::Options (module)">Options</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">rmodbus/lib/rmodbus/slave.rb</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="RTUSlave.html" title="ModBus::RTUSlave (class)">RTUSlave</a></span>, <span class='object_link'><a href="RTUViaTCPSlave.html" title="ModBus::RTUViaTCPSlave (class)">RTUViaTCPSlave</a></span>, <span class='object_link'><a href="TCPSlave.html" title="ModBus::TCPSlave (class)">TCPSlave</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="Exceptions-constant" class="">Exceptions =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
      <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='const'>IllegalFunction</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The function code received in the query is not an allowable action for the server</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>2</span> <span class='op'>=&gt;</span> <span class='const'>IllegalDataAddress</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The data address received in the query is not an allowable address for the server</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>3</span> <span class='op'>=&gt;</span> <span class='const'>IllegalDataValue</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A value contained in the query data field is not an allowable value for server</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>4</span> <span class='op'>=&gt;</span> <span class='const'>SlaveDeviceFailure</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>An unrecoverable error occurred while the server was attempting to perform the requested action</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>5</span> <span class='op'>=&gt;</span> <span class='const'>Acknowledge</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The server has accepted the request and is processing it, but a long duration of time will be required to do so</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>6</span> <span class='op'>=&gt;</span> <span class='const'>SlaveDeviceBus</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The server is engaged in processing a long duration program command</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='int'>8</span> <span class='op'>=&gt;</span> <span class='const'>MemoryParityError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The extended file area failed to pass a consistency check</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid-instance_method" title="#uid (instance method)">- (Object) <strong>uid</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Number of times to retry on read and read timeouts.
</p>
</div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="Options.html" title="ModBus::Options (module)">Options</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Options.html#raise_exception_on_mismatch-instance_method" title="ModBus::Options#raise_exception_on_mismatch (method)">raise_exception_on_mismatch</a></span>, <span class='object_link'><a href="Options.html#read_retries-instance_method" title="ModBus::Options#read_retries (method)">read_retries</a></span>, <span class='object_link'><a href="Options.html#read_retry_timeout-instance_method" title="ModBus::Options#read_retry_timeout (method)">read_retry_timeout</a></span></p>

  
  
  
  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="Debug.html" title="ModBus::Debug (module)">Debug</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Debug.html#debug-instance_method" title="ModBus::Debug#debug (method)">debug</a></span>, <span class='object_link'><a href="Debug.html#debug_log-instance_method" title="ModBus::Debug#debug_log (method)">debug_log</a></span>, <span class='object_link'><a href="Debug.html#raise_exception_on_mismatch-instance_method" title="ModBus::Debug#raise_exception_on_mismatch (method)">raise_exception_on_mismatch</a></span>, <span class='object_link'><a href="Debug.html#read_retries-instance_method" title="ModBus::Debug#read_retries (method)">read_retries</a></span>, <span class='object_link'><a href="Debug.html#read_retry_timeout-instance_method" title="ModBus::Debug#read_retry_timeout (method)">read_retry_timeout</a></span></p>

  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#check_response_mismatch-instance_method" title="#check_response_mismatch (instance method)">- (Object) <strong>check_response_mismatch</strong>(request, response) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#coils-instance_method" title="#coils (instance method)">- (ReadWriteProxy) <strong>coils</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a ModBus::ReadWriteProxy hash interface for coils.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discrete_inputs-instance_method" title="#discrete_inputs (instance method)">- (ReadOnlyProxy) <strong>discrete_inputs</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a ModBus::ReadOnlyProxy hash interface for discrete inputs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#holding_registers-instance_method" title="#holding_registers (instance method)">- (ReadWriteProxy) <strong>holding_registers</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a ModBus::ReadWriteProxy hash interface for holding registers.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Slave) <strong>initialize</strong>(uid, io) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Slave.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#input_registers-instance_method" title="#input_registers (instance method)">- (ReadOnlyProxy) <strong>input_registers</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a read/write ModBus::ReadOnlyProxy hash interface for coils.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mask_write_register-instance_method" title="#mask_write_register (instance method)">- (Object) <strong>mask_write_register</strong>(addr, and_mask, or_mask) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Mask a holding register.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query-instance_method" title="#query (instance method)">- (String) <strong>query</strong>(request) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Request pdu to slave device.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_coils-instance_method" title="#read_coils (instance method)">- (Array) <strong>read_coils</strong>(addr, ncoils) </a>
    

    
      (also: #read_coil)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read coils.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_discrete_inputs-instance_method" title="#read_discrete_inputs (instance method)">- (Array) <strong>read_discrete_inputs</strong>(addr, ninputs) </a>
    

    
      (also: #read_discrete_input)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read discrete inputs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_holding_registers-instance_method" title="#read_holding_registers (instance method)">- (Array) <strong>read_holding_registers</strong>(addr, nregs) </a>
    

    
      (also: #read_holding_register)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read holding registers.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_input_registers-instance_method" title="#read_input_registers (instance method)">- (Array) <strong>read_input_registers</strong>(addr, nregs) </a>
    

    
      (also: #read_input_register)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read input registers.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_multiple_coils-instance_method" title="#write_multiple_coils (instance method)">- (Object) <strong>write_multiple_coils</strong>(addr, vals) </a>
    

    
      (also: #write_coils)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Write multiple coils.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_multiple_registers-instance_method" title="#write_multiple_registers (instance method)">- (Object) <strong>write_multiple_registers</strong>(addr, vals) </a>
    

    
      (also: #write_holding_registers)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Write multiple holding registers.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_single_coil-instance_method" title="#write_single_coil (instance method)">- (Object) <strong>write_single_coil</strong>(addr, val) </a>
    

    
      (also: #write_coil)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Write a single coil.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_single_register-instance_method" title="#write_single_register (instance method)">- (Object) <strong>write_single_register</strong>(addr, val) </a>
    

    
      (also: #write_holding_register)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Write a single holding register.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Debug.html" title="ModBus::Debug (module)">Debug</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Debug.html#log-instance_method" title="ModBus::Debug#log (method)">#log</a></span>, <span class='object_link'><a href="Debug.html#log_error-instance_method" title="ModBus::Debug#log_error (method)">#log_error</a></span>, <span class='object_link'><a href="Debug.html#logging_bytes-instance_method" title="ModBus::Debug#logging_bytes (method)">#logging_bytes</a></span></p>

  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ModBus::Slave (class)">Slave</a></span></tt>) <strong>initialize</strong>(uid, io) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Slave
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 32</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id uid'>uid</span><span class='comma'>,</span> <span class='id io'>io</span><span class='rparen'>)</span>
 <span class='ivar'>@uid</span> <span class='op'>=</span> <span class='id uid'>uid</span>
  <span class='ivar'>@io</span> <span class='op'>=</span> <span class='id io'>io</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="uid=-instance_method"></span>
      <span id="uid-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="uid-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Number of times to retry on read and read timeouts
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 22</span>

<span class='kw'>def</span> <span class='id uid'>uid</span>
  <span class='ivar'>@uid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="check_response_mismatch-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_response_mismatch</strong>(request, response)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/ResponseMismatch.html" title="ModBus::Errors::ResponseMismatch (class)">ResponseMismatch</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 272</span>

<span class='kw'>def</span> <span class='id check_response_mismatch'>check_response_mismatch</span><span class='lparen'>(</span><span class='id request'>request</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span>
  <span class='id read_func'>read_func</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getbyte'>getbyte</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='id data'>data</span> <span class='op'>=</span> <span class='id response'>response</span><span class='lbracket'>[</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='comment'>#Mismatch functional code
</span>  <span class='id send_func'>send_func</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getbyte'>getbyte</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id read_func'>read_func</span> <span class='op'>!=</span> <span class='id send_func'>send_func</span>
    <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Function code is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id send_func'>send_func</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id read_func'>read_func</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>case</span> <span class='id read_func'>read_func</span>
  <span class='kw'>when</span> <span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span>
    <span class='id bc'>bc</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>8</span> <span class='op'>+</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='id data'>data</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>!=</span> <span class='id bc'>bc</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Byte count is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id bc'>bc</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id data'>data</span><span class='period'>.</span><span class='id size'>size</span><span class='rbrace'>}</span><span class='tstring_content'> bytes)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span>
    <span class='id rc'>rc</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span> 
    <span class='kw'>if</span> <span class='id data'>data</span><span class='period'>.</span><span class='id size'>size</span><span class='op'>/</span><span class='int'>2</span> <span class='op'>!=</span> <span class='id rc'>rc</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Register count is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id rc'>rc</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id data'>data</span><span class='period'>.</span><span class='id size'>size</span><span class='op'>/</span><span class='int'>2</span><span class='rbrace'>}</span><span class='tstring_content'> regs)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='int'>5</span><span class='comma'>,</span><span class='int'>6</span>
    <span class='id exp_addr'>exp_addr</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id got_addr'>got_addr</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id exp_addr'>exp_addr</span> <span class='op'>!=</span> <span class='id got_addr'>got_addr</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Address is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id exp_addr'>exp_addr</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id got_addr'>got_addr</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id exp_val'>exp_val</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
    <span class='id got_val'>got_val</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id exp_val'>exp_val</span> <span class='op'>!=</span> <span class='id got_val'>got_val</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Value is mismatch (expected 0x</span><span class='embexpr_beg'>#{</span><span class='id exp_val'>exp_val</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>, got 0x</span><span class='embexpr_beg'>#{</span><span class='id got_val'>got_val</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='int'>15</span><span class='comma'>,</span><span class='int'>16</span>
    <span class='id exp_addr'>exp_addr</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id got_addr'>got_addr</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id exp_addr'>exp_addr</span> <span class='op'>!=</span> <span class='id got_addr'>got_addr</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Address is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id exp_addr'>exp_addr</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id got_addr'>got_addr</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  
    <span class='id exp_quant'>exp_quant</span> <span class='op'>=</span> <span class='id request'>request</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
    <span class='id got_quant'>got_quant</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getword'>getword</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id exp_quant'>exp_quant</span> <span class='op'>!=</span> <span class='id got_quant'>got_quant</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Quantity is mismatch (expected </span><span class='embexpr_beg'>#{</span><span class='id exp_quant'>exp_quant</span><span class='rbrace'>}</span><span class='tstring_content'>, got </span><span class='embexpr_beg'>#{</span><span class='id got_quant'>got_quant</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fuiction (</span><span class='embexpr_beg'>#{</span><span class='id read_func'>read_func</span><span class='rbrace'>}</span><span class='tstring_content'>) is not supported raising response mismatch</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id raise'>raise</span> <span class='const'>ResponseMismatch</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='comma'>,</span> <span class='id request'>request</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id msg'>msg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="coils-instance_method">
  
    - (<tt><span class='object_link'><a href="ReadWriteProxy.html" title="ModBus::ReadWriteProxy (class)">ReadWriteProxy</a></span></tt>) <strong>coils</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a ModBus::ReadWriteProxy hash interface for coils
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">coils[addr] =&gt; [1]
coils[addr1..addr2] =&gt; [1, 0, ..]
coils[addr] = 0 =&gt; [0]
coils[addr1..addr2] = [1, 0, ..] =&gt; [1, 0, ..]</pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ReadWriteProxy.html" title="ModBus::ReadWriteProxy (class)">ReadWriteProxy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
proxy object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 46</span>

<span class='kw'>def</span> <span class='id coils'>coils</span>
  <span class='const'>ModBus</span><span class='op'>::</span><span class='const'>ReadWriteProxy</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='symbol'>:coil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="discrete_inputs-instance_method">
  
    - (<tt><span class='object_link'><a href="ReadOnlyProxy.html" title="ModBus::ReadOnlyProxy (class)">ReadOnlyProxy</a></span></tt>) <strong>discrete_inputs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a ModBus::ReadOnlyProxy hash interface for discrete inputs
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">discrete_inputs[addr] =&gt; [1]
discrete_inputs[addr1..addr2] =&gt; [1, 0, ..]</pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ReadOnlyProxy.html" title="ModBus::ReadOnlyProxy (class)">ReadOnlyProxy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
proxy object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 114</span>

<span class='kw'>def</span> <span class='id discrete_inputs'>discrete_inputs</span>
  <span class='const'>ModBus</span><span class='op'>::</span><span class='const'>ReadOnlyProxy</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='symbol'>:discrete_input</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="holding_registers-instance_method">
  
    - (<tt><span class='object_link'><a href="ReadWriteProxy.html" title="ModBus::ReadWriteProxy (class)">ReadWriteProxy</a></span></tt>) <strong>holding_registers</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a ModBus::ReadWriteProxy hash interface for holding registers
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">holding_registers[addr] =&gt; [123]
holding_registers[addr1..addr2] =&gt; [123, 234, ..]
holding_registers[addr] = 123 =&gt; 123
holding_registers[addr1..addr2] = [234, 345, ..] =&gt; [234, 345, ..]</pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ReadWriteProxy.html" title="ModBus::ReadWriteProxy (class)">ReadWriteProxy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
proxy object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 164</span>

<span class='kw'>def</span> <span class='id holding_registers'>holding_registers</span>
  <span class='const'>ModBus</span><span class='op'>::</span><span class='const'>ReadWriteProxy</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='symbol'>:holding_register</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="input_registers-instance_method">
  
    - (<tt><span class='object_link'><a href="ReadOnlyProxy.html" title="ModBus::ReadOnlyProxy (class)">ReadOnlyProxy</a></span></tt>) <strong>input_registers</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a read/write ModBus::ReadOnlyProxy hash interface for coils
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">input_registers[addr] =&gt; [1]
input_registers[addr1..addr2] =&gt; [1, 0, ..]</pre>
    
  </div>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ReadOnlyProxy.html" title="ModBus::ReadOnlyProxy (class)">ReadOnlyProxy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
proxy object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 138</span>

<span class='kw'>def</span> <span class='id input_registers'>input_registers</span>
  <span class='const'>ModBus</span><span class='op'>::</span><span class='const'>ReadOnlyProxy</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='symbol'>:input_register</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mask_write_register-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mask_write_register</strong>(addr, and_mask, or_mask) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Mask a holding register
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">mask_write_register(1, 0xAAAA, 0x00FF) =&gt; self</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address registers
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>and_mask</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
mask for AND operation
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>or_mask</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
mask for OR operation
</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 222</span>

<span class='kw'>def</span> <span class='id mask_write_register'>mask_write_register</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id and_mask'>and_mask</span><span class='comma'>,</span> <span class='id or_mask'>or_mask</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x16</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id and_mask'>and_mask</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id or_mask'>or_mask</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="query-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>query</strong>(request) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Request pdu to slave device
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>pdu</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
request to slave
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
received data
</p>
</div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/ResponseMismatch.html" title="ModBus::Errors::ResponseMismatch (class)">ResponseMismatch</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the received echo response differs from the request
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/ModBusTimeout.html" title="ModBus::Errors::ModBusTimeout (class)">ModBusTimeout</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
timed out during read attempt
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/ModBusException.html" title="ModBus::Errors::ModBusException (class)">ModBusException</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
unknown error
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/IllegalFunction.html" title="ModBus::Errors::IllegalFunction (class)">IllegalFunction</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
function code received in the query is not an allowable action for the
server
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/IllegalDataAddress.html" title="ModBus::Errors::IllegalDataAddress (class)">IllegalDataAddress</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
data address received in the query is not an allowable address for the
server
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/IllegalDataValue.html" title="ModBus::Errors::IllegalDataValue (class)">IllegalDataValue</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
value contained in the query data field is not an allowable value for
server
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/SlaveDeviceFailure.html" title="ModBus::Errors::SlaveDeviceFailure (class)">SlaveDeviceFailure</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
unrecoverable error occurred while the server was attempting to perform the
requested action
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/Acknowledge.html" title="ModBus::Errors::Acknowledge (class)">Acknowledge</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
server has accepted the request and is processing it, but a long duration
of time will be required to do so
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/SlaveDeviceBus.html" title="ModBus::Errors::SlaveDeviceBus (class)">SlaveDeviceBus</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
server is engaged in processing a long duration program command
</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Errors/MemoryParityError.html" title="ModBus::Errors::MemoryParityError (class)">MemoryParityError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
extended file area failed to pass a consistency check
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 242</span>

<span class='kw'>def</span> <span class='id query'>query</span><span class='lparen'>(</span><span class='id request'>request</span><span class='rparen'>)</span>
  <span class='id tried'>tried</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id response'>response</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>begin</span>
    <span class='id timeout'>timeout</span><span class='lparen'>(</span><span class='ivar'>@read_retry_timeout</span><span class='comma'>,</span> <span class='const'>ModBusTimeout</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id send_pdu'>send_pdu</span><span class='lparen'>(</span><span class='id request'>request</span><span class='rparen'>)</span>
      <span class='id response'>response</span> <span class='op'>=</span> <span class='id read_pdu'>read_pdu</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>ModBusTimeout</span> <span class='op'>=&gt;</span> <span class='id err'>err</span>
    <span class='id log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Timeout of read operation: (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@read_retries</span> <span class='op'>-</span> <span class='id tried'>tried</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='id tried'>tried</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>retry</span> <span class='kw'>unless</span> <span class='id tried'>tried</span> <span class='op'>&gt;=</span> <span class='ivar'>@read_retries</span>
    <span class='id raise'>raise</span> <span class='const'>ModBusTimeout</span><span class='period'>.</span><span class='id new'>new</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Timed out during read attempt</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id response'>response</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>0</span>

  <span class='id read_func'>read_func</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getbyte'>getbyte</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id read_func'>read_func</span> <span class='op'>&gt;=</span> <span class='int'>0x80</span>
    <span class='id exc_id'>exc_id</span> <span class='op'>=</span> <span class='id response'>response</span><span class='period'>.</span><span class='id getbyte'>getbyte</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>Exceptions</span><span class='lbracket'>[</span><span class='id exc_id'>exc_id</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='const'>Exceptions</span><span class='lbracket'>[</span><span class='id exc_id'>exc_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id nil?'>nil?</span>

    <span class='id raise'>raise</span> <span class='const'>ModBusException</span><span class='period'>.</span><span class='id new'>new</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown error</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id check_response_mismatch'>check_response_mismatch</span><span class='lparen'>(</span><span class='id request'>request</span><span class='comma'>,</span> <span class='id response'>response</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id raise_exception_on_mismatch'>raise_exception_on_mismatch</span>
  <span class='id response'>response</span><span class='lbracket'>[</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_coils-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>) <strong>read_coils</strong>(addr, ncoils) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='read_coil-instance_method'>read_coil</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read coils
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">read_coils(addr, ncoils) =&gt; [1, 0, ..]</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first coil
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ncoils</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
number coils
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
coils
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 58</span>

<span class='kw'>def</span> <span class='id read_coils'>read_coils</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id ncoils'>ncoils</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id ncoils'>ncoils</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span><span class='period'>.</span><span class='id unpack_bits'>unpack_bits</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='id ncoils'>ncoils</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_discrete_inputs-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>) <strong>read_discrete_inputs</strong>(addr, ninputs) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='read_discrete_input-instance_method'>read_discrete_input</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read discrete inputs
</p>
<p>
@param[Integer] ninputs number inputs
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">read_discrete_inputs(addr, ninputs) =&gt; [1, 0, ..]</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first input
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
inputs
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 126</span>

<span class='kw'>def</span> <span class='id read_discrete_inputs'>read_discrete_inputs</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id ninputs'>ninputs</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x2</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id ninputs'>ninputs</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span><span class='period'>.</span><span class='id unpack_bits'>unpack_bits</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='id ninputs'>ninputs</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_holding_registers-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>) <strong>read_holding_registers</strong>(addr, nregs) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='read_holding_register-instance_method'>read_holding_register</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read holding registers
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">read_holding_registers(1, 5) =&gt; [1, 0, ..]</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first registers
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>nregs</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
number registers
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
registers
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 176</span>

<span class='kw'>def</span> <span class='id read_holding_registers'>read_holding_registers</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id nregs'>nregs</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x3</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id nregs'>nregs</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>n*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_input_registers-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>) <strong>read_input_registers</strong>(addr, nregs) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='read_input_register-instance_method'>read_input_register</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read input registers
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">read_input_registers(1, 5) =&gt; [1, 0, ..]</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first registers
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>nregs</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
number registers
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
registers
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 150</span>

<span class='kw'>def</span> <span class='id read_input_registers'>read_input_registers</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id nregs'>nregs</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x4</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id nregs'>nregs</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>n*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_multiple_coils-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write_multiple_coils</strong>(addr, vals) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='write_coils-instance_method'>write_coils</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Write multiple coils
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">write_multiple_coils(1, [0,1,0,1]) =&gt; self</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first coil
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>vals</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
written coils
</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 88</span>

<span class='kw'>def</span> <span class='id write_multiple_coils'>write_multiple_coils</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id vals'>vals</span><span class='rparen'>)</span>
  <span class='id nbyte'>nbyte</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id vals'>vals</span><span class='period'>.</span><span class='id size'>size</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&gt;&gt;</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='id sum'>sum</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='lparen'>(</span><span class='id vals'>vals</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id downto'>downto</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
    <span class='id sum'>sum</span> <span class='op'>=</span> <span class='id sum'>sum</span> <span class='op'>&lt;&lt;</span> <span class='int'>1</span>
    <span class='id sum'>sum</span> <span class='op'>|=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id vals'>vals</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='id s_val'>s_val</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id nbyte'>nbyte</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span>
    <span class='id s_val'>s_val</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id sum'>sum</span> <span class='op'>&amp;</span> <span class='int'>0xff</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chr'>chr</span>
    <span class='id sum'>sum</span> <span class='op'>&gt;&gt;=</span> <span class='int'>8</span>
  <span class='kw'>end</span>

  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\xf</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id vals'>vals</span><span class='period'>.</span><span class='id size'>size</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id nbyte'>nbyte</span><span class='period'>.</span><span class='id chr'>chr</span> <span class='op'>+</span> <span class='id s_val'>s_val</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_multiple_registers-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write_multiple_registers</strong>(addr, vals) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='write_holding_registers-instance_method'>write_holding_registers</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Write multiple holding registers
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">write_multiple_registers(1, [0xaa, 0]) =&gt; self</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address first registers
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
written registers
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
self
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 204</span>

<span class='kw'>def</span> <span class='id write_multiple_registers'>write_multiple_registers</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id vals'>vals</span><span class='rparen'>)</span>
  <span class='id s_val'>s_val</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id vals'>vals</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id reg'>reg</span><span class='op'>|</span>
    <span class='id s_val'>s_val</span> <span class='op'>&lt;&lt;</span> <span class='id reg'>reg</span><span class='period'>.</span><span class='id to_word'>to_word</span>
  <span class='kw'>end</span>

  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x10</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id vals'>vals</span><span class='period'>.</span><span class='id size'>size</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id vals'>vals</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>*</span> <span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chr'>chr</span> <span class='op'>+</span> <span class='id s_val'>s_val</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_single_coil-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write_single_coil</strong>(addr, val) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='write_coil-instance_method'>write_coil</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Write a single coil
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">write_single_coil(1, 0) =&gt; self</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address coil
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
value coil (0 or other)
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
self
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 71</span>

<span class='kw'>def</span> <span class='id write_single_coil'>write_single_coil</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id val'>val</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x5</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='int'>0</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x5</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='int'>0xff00</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_single_register-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write_single_register</strong>(addr, val) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='write_holding_register-instance_method'>write_holding_register</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Write a single holding register
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">write_single_register(1, 0xaa) =&gt; self</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>addr</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
address registers
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
written to register
</p>
</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
self
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rmodbus/lib/rmodbus/slave.rb', line 189</span>

<span class='kw'>def</span> <span class='id write_single_register'>write_single_register</span><span class='lparen'>(</span><span class='id addr'>addr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='rparen'>)</span>
  <span class='id query'>query</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\x6</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id to_word'>to_word</span> <span class='op'>+</span> <span class='id val'>val</span><span class='period'>.</span><span class='id to_word'>to_word</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sun Oct 30 10:51:19 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.9.2).
</div>

  </body>
</html>